<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Website</title>
    <link href="../css/style.css" rel="stylesheet" media="all" />
</head>

<body id="body">
    <div class="header">
        <h1>Formulario</h1>
        <div class="flex-container">
            <div class="headerItem">
                <span id="formulario">Formulario</span>
            </div>
            <div class="headerItem">
                <span id="instrucciones">Instrucciones</span>
            </div>
        </div>
    </div>
    <div class="container" id="container">
        <!-- <div class="header">
            <h1>Formulario</h1>
        </div> -->
        <form id="form1" action="/request" method="POST">
            <label for="ciclo">Ciclo Escolar:</label>
            <input type="text" id="ciclo" name="ciclo" required><br>
            <div class="materia">
                <label for="materia[0]">Materia:</label>
                <input type="text" id="materia[0]" name="materia[0]" class="arrayClass" placeholder="Clave">
            </div>
            <div class="addContainer" id="addContainer">
                <input type="button" id="add" value="Add New"><br> 
            </div>
            <!-- <button onclick="addCourse()">Add</button> -->
            <button type="button" id="sendButton">Get Schedules</button>
            <!-- <button type="submit" id="sendButton">Get Schedules</button> -->

            <ol id="list_item"></ol>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
            <!-- <script src="../scripts/addCourse.js"></script>
            <script src="../scripts/removeCourse.js"></script> -->
            <script src="../scripts/submit.js"></script>
            <script src="../scripts/redirect.js"></script>
            <script>
                $(document).ready(function(){
                    $("#add").click(function(e){
                        e.preventDefault();
                        var numberOfmaterias = $("#form1").find("input[name^='materia']").length;
                        console.log(numberOfmaterias);
                        if (numberOfmaterias < 6){
                            // var label = '<label for="[materia][' + numberOfmaterias + ']">Materia ' + (numberOfmaterias + 1) + '</label> ';
                            var label = '<label for="[materia][' + numberOfmaterias + ']">Materia:'  + '</label> ';
                            var input = '<input type="text" name="materia[' + numberOfmaterias + ']" id="materia[' + numberOfmaterias + ']" class="arrayClass" placeholder="Clave"/>';
                            var removeButton = '<button class="remove-materia">Remove</button>';
                            var html = "<div class='materia'>" + label + input + removeButton + "</div>";
                            // var contain = '<div class="flex-container">' + html + '</div>';
                            $("#form1").find("#add").before(html);
                        }
                        else {
                            var alert = document.getElementById('alert');
                            if(alert === null){
                                var span = '<span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span> ';
                                var message = 'Ya tienes el <strong>m√°ximo de 6</strong> materias.';
                                var alert = '<div class="alert" id="alert">' + span + message + '</div>';
                                $("#form1").find("#addContainer").after(alert);
                            }
                            else {
                                alert.style.display = "block";
                            }
                        }
                    });
                });

                $(document).on("click", ".remove-materia",function(e){
                    e.preventDefault();
                    $(this).parents(".materia").remove();
                    //update labels
                    // $("#form1").find("label[for^='materia']").each(function(){
                    //     $(this).html("Materia " + ($(this).parents('.materia').index() + 1));
                    // });
                });
            </script>
          </form>
    </div>
</body>
</html>