<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Website</title>
    <link href="../css/style.css" rel="stylesheet" media="all" />
</head>

<body id="body">
    <div class="header">
        <h1>Formulario</h1>
        <div class="flex-container">
            <div class="headerItem">
                <span id="formulario">Formulario</span>
            </div>
            <div class="headerItem">
                <span id="instrucciones">Instrucciones</span>
            </div>
        </div>
    </div>
    <div class="container" id="container">
        <form id="form1" action="/request" method="POST">
            <!-- Velocidad -->
            <div class="velocidad">
                <label class="label">Velocidad:</label>
                <label class="radioContainer">Lento
                    <input type="radio" name="speed" value="5" checked>
                    <span class="checkmark"></span>
                </label>
                <label class="radioContainer">Rápido
                    <input type="radio" name="speed" value="1">
                    <span class="checkmark"></span>
                </label>
                <!-- Velocidad Info -->
                <button id="speedInfo" class="info" type="button">i</button>
                <div id="speedModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span id="speedModalClose" class="close">&times;</span>
                            <h2>Información - Velocidad</h2>
                        </div>
                        <div class="modal-body">
                            <p>Lento realiza el proceso de manera lenta pero con mejores resultados.</p>
                            <p>Rápido realiza el proceso de manera rápido con peores resultados.</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Ciclo -->
            <label for="ciclo" class="label">Ciclo Escolar:</label>
            <input type="text" id="ciclo" name="ciclo" maxlength="6" placeholder="Ingrese un Ciclo Escolar" required>
            <!-- Ciclo Info -->
            <button id="cicloInfo" class="info" type="button">i</button>
            <div id="cicloModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <span id="cicloModalClose" class="close">&times;</span>
                        <h2>Información - Ciclo</h2>
                    </div>
                    <div class="modal-body">
                        <p>Ingresa el año del semestre que estes cursando y el ciclo (este suele ser 10 o 20).</p>
                        <p>Por ejemplo <strong>202120</strong>.</p>
                    </div>
                </div>
            </div>
            <!-- Materia -->
            <div class="materia">
                <label for="materia[0]" class="label">Materia:</label>
                <input type="text" id="materia[0]" name="materia[0]" class="arrayClass" placeholder="Ingrese una Clave" maxlength="5">
                <!-- Materia Info -->
                <button id="materiaInfo" class="info" type="button">i</button>
                <div id="materiaModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span id="materiaModalClose" class="close">&times;</span>
                            <h2>Informacíon - Materia</h2>
                        </div>
                        <div class="modal-body">
                            <p>Ingresa una clave para la materia que desees, estas se encuentran en la malla curricular.</p> 
                            <p>Suele tener formato similar al siguiente ejemplo: <strong>I5893</strong></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="addContainer" id="addContainer">
                <input type="button" id="add" value="Agregar Materia"><br> 
            </div>
            <button type="button" id="sendButton">Conseguir Horarios</button>

            <ol id="list_item"></ol>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
            <script src="../scripts/submit.js"></script>
            <script src="../scripts/redirect.js"></script>
            <script src="../scripts/infoModals.js"></script>
            <script>
                $(document).ready(function(){
                    $("#add").click(function(e){
                        e.preventDefault();
                        var numberOfmaterias = $("#form1").find("input[name^='materia']").length;
                        console.log(numberOfmaterias);
                        if (numberOfmaterias < 10){
                            var label = '<label class="label" for="[materia][' + numberOfmaterias + ']">Materia:'  + '</label> ';
                            var input = '<input type="text" name="materia[' + numberOfmaterias + ']" id="materia[' + numberOfmaterias + ']" class="arrayClass" placeholder="Ingrese una Clave" maxlength="5"/>';
                            var removeButton = '<button class="remove-materia">Remover</button>';
                            var html = "<div class='materia'>" + label + input + removeButton + "</div>";
                            // var contain = '<div class="flex-container">' + html + '</div>';
                            $("#form1").find("#add").before(html);
                        }
                        else {
                            var alert = document.getElementById('alert');
                            if(alert === null){
                                var span = '<span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span> ';
                                var message = 'Ya tienes el <strong>máximo de 10</strong> materias.';
                                var alert = '<div class="alert" id="alert">' + span + message + '</div>';
                                $("#form1").find("#addContainer").after(alert);
                            }
                            else {
                                alert.style.display = "block";
                            }
                        }
                    });
                });

                $(document).on("click", ".remove-materia",function(e){
                    e.preventDefault();
                    $(this).parents(".materia").remove();
                });
            </script>
        </form>
    </div>
</body>
</html>